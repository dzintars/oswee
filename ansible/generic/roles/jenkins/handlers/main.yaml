---
# handlers file for jenkins

- name: Start jenkins
  become: true
  ansible.builtin.systemd:
    name: '{{ jenkins_service_name }}.service'
    state: started

- name: Enable jenkins
  become: true
  ansible.builtin.systemd:
    name: '{{ jenkins_service_name }}.service'
    enabled: true

- name: Restart jenkins
  become: true
  ansible.builtin.systemd:
    name: '{{ jenkins_service_name }}'
    state: restarted
    daemon_reload: true

- name: Restart firewalld
  become: true
  systemd:
    name: firewalld
    state: restarted
    daemon_reload: true

- name: Start ssh signing timer
  become: true
  ansible.builtin.systemd:
    name: sign-jenkins-ssh-cert.timer
    state: started

- name: Enable ssh signing timer
  become: true
  ansible.builtin.systemd:
    name: sign-jenkins-ssh-cert.timer
    enabled: true
