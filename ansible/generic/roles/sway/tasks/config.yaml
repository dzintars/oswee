---
# tasks file for sway

# - name: Create mounting directories
#   ansible.builtin.become: true
#   file:
#     path: '{{ item }}'
#     state: directory
#     owner: '{{ ansible_user_id }}'
#     group: '{{ ansible_user_id }}'
#     mode: '0755'
#   loop: '{{ mountpoints }}'

- name: Create sway directory
  ansible.builtin.file:
    path: '$HOME/.config/sway'
    state: directory
    owner: '{{ ansible_user_id }}'
    group: '{{ ansible_user_id }}'
    mode: '0755'

- name: Copy sway config
  ansible.builtin.copy:
    src: '{{ item.src }}'
    dest: '{{ item.dest }}'
    mode: '{{ item.mode }}'
  loop:
    - { src: 'config', dest: '$HOME/.config/sway/', mode: '0644' }
    - { src: 'idle.sh', dest: '$HOME/.config/sway/', mode: '0755' }
    - { src: 'lock.sh', dest: '$HOME/.config/sway/', mode: '0755' }

- name: Create Pictures directories
  ansible.builtin.file:
    path: '{{ item }}'
    state: directory
    owner: '{{ ansible_user_id }}'
    group: '{{ ansible_user_id }}'
    mode: '0755'
  loop:
    - '$HOME/Pictures/Wallpapers'
    - '$HOME/Pictures/Printscreens'

- name: Copy background image
  become: true
  ansible.builtin.copy:
    src: '{{ item.src }}'
    dest: '{{ item.dest }}'
    owner: '{{ ansible_user_id }}'
    group: '{{ ansible_user_id }}'
    mode: '0644'
  loop:
    - { src: 'wallpapers/tharsus.jpg', dest: '/usr/share/backgrounds/' }

- name: Create waybar directory
  ansible.builtin.file:
    path: '$HOME/.config/waybar'
    state: directory
    owner: '{{ ansible_user_id }}'
    group: '{{ ansible_user_id }}'
    mode: '0755'

- name: Copy waybar config
  ansible.builtin.copy:
    src: '{{ item.src }}'
    dest: '{{ item.dest }}'
    mode: '{{ item.mode }}'
  loop:
    - { src: 'waybar/config', dest: '$HOME/.config/waybar/', mode: '0644' }
    - { src: 'waybar/style.css', dest: '$HOME/.config/waybar/', mode: '0644' }

- name: Create wlogout directory
  ansible.builtin.file:
    path: '/home/{{ ansible_user_id }}/.config/wlogout'
    state: directory
    owner: '{{ ansible_user_id }}'
    group: '{{ ansible_user_id }}'
    mode: '0755'

- name: Copy wlogout config
  ansible.builtin.copy:
    src: '{{ item.src }}'
    dest: '{{ item.dest }}'
    mode: '{{ item.mode }}'
  loop:
    - { src: 'wlogout/layout', dest: '/home/{{ ansible_user_id }}/.config/wlogout/', mode: '0644' }
    - { src: 'wlogout/style.css', dest: '/home/{{ ansible_user_id }}/.config/wlogout/', mode: '0644' }

- name: Set timezone
  become: true
  ansible.builtin.timezone:
    name: 'Europe/Riga'
