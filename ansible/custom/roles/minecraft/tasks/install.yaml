---
# tasks file for minecraft

- name: install | Install packages
  become: true
  ansible.builtin.dnf:
    name: '{{ item }}'
    state: present
  loop: '{{ packages.redhat }}'

- name: install | Download Minecraft launcher
  ansible.builtin.unarchive:
    src: https://launcher.mojang.com/download/Minecraft.tar.gz
    dest: '/home/{{ ansible_user_id }}/Games'
    remote_src: true
    extra_opts: [--strip-components=1]  # Remove top level directory

- name: install | Create Minecraft symlink
  become: true
  ansible.builtin.file:
    src: '/home/{{ ansible_user_id }}/minecraft-launcher/minecraft-launcher'
    path: /usr/local/bin/minecraft-launcher
    state: link
    force: true

- name: install | Copy Minecraft desktop launcher
  ansible.builtin.copy:
    src: minecraft.desktop
    dest: '/home/{{ ansible_user_id }}/.local/share/applications/minecraft.desktop'
    mode: '0755'

# TODO: Add the application icons
...
