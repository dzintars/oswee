---
# tasks/dpapi.yaml file for oswee.generic.haproxy role

# TODO: Unarchive is NOT idempotent
- name: dpapi | Download release source
  become: true
  ansible.builtin.unarchive:
    # Versions should match the actual HAProxy version. Newer Data Plane API might not work with older HAProxy server.
    src: https://github.com/haproxytech/dataplaneapi/releases/download/v2.6.2/dataplaneapi_2.6.2_Linux_x86_64.tar.gz
    dest: /usr/local/bin
    remote_src: true
    extra_opts: [--strip-components=1]
...
