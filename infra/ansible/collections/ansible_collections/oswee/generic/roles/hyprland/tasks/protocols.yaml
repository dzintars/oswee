---
# tasks/protocols.yaml file for oswee.generic.hyprland role

- name: protocols | Meson build hyprland-protocols
  ansible.builtin.command: meson setup _build
  args:
    chdir: '{{ hyprland_source_path }}/subprojects/hyprland-protocols'
  # when: hyprland_repo.changed

- name: protocols | Ninja install hyprland-protocols
  become: true
  ansible.builtin.command: ninja -C _build install
  args:
    chdir: '{{ hyprland_source_path }}/subprojects/hyprland-protocols'
  # when: hyprland_repo.changed

- name: protocols | Create hyprland-protocols symlink
  become: true
  ansible.builtin.file:
    src: '{{ hyprland_source_path }}/subprojects/hyprland-protocols'
    path: /usr/local/share/hyprland-protocols
    state: link
    force: true
...
