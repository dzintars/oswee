---
# tasks/environment.yaml file for oswee.generic.sway role

- name: environment | Create Sway environment
  become: true
  ansible.builtin.copy:
    dest: '{{ sway_environment_path }}'
    mode: '0644'
    content: |
      [ "$(tty)" = "/dev/tty1" ] && exec sway  # Run Sway at login

# https://github.com/swaywm/sway/wiki#issues-with-java-applications
# export _JAVA_AWT_WM_NONREPARENTING=1

- name: environment | Add Wayland environment
  become: true
  ansible.builtin.copy:
    dest: /etc/profile.d/wayland.sh
    mode: '0644'
    content: |
      export QT_QPA_PLATFORM=Wayland
      export XDG_CURRENT_DESKTOP=sway
      export XDG_SESSION_DESKTOP=sway
      export XDG_SESSION_TYPE=wayland  # Do i need this?
      export XDG_CURRENT_SESSION_TYPE=wayland
      export GDG_BACKEND="wayland"
...
