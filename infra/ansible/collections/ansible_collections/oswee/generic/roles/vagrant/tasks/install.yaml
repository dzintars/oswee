---
# tasks file for Vagrant

- name: install | Install Hashicorp rpm key
  become: true
  ansible.builtin.rpm_key:
    state: present
    key: https://rpm.releases.hashicorp.com/gpg

- name: install | Install HashiCorp repository
  become: true
  ansible.builtin.get_url:
    url: https://rpm.releases.hashicorp.com/fedora/hashicorp.repo
    dest: /etc/yum.repos.d/hashicorp.repo

- name: install | Install Vagrant package
  become: true
  ansible.builtin.dnf:
    name: vagrant
    state: present

# - name: install | Install packages
#   become: true
#   ansible.builtin.dnf:
#     name: '{{ item }}'
#     state: present
#   loop: '{{ packages.redhat }}'
#
# - name: install | Install Vagrant
#   become: true
#   ansible.builtin.dnf:
#     name: '{{ vagrant_rpm }}'
#     state: present
#     disable_gpg_check: true

- name: install | Install Vagrant-Libvirt plugin
  ansible.builtin.command: vagrant plugin install vagrant-libvirt
  environment:
    CONFIGURE_ARGS: with-libvirt-include=/usr/include/libvirt with-libvirt-lib=/usr/lib64
...
