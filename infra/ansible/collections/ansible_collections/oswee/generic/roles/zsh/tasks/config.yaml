---
# tasks/config.yaml file for oswee.generic.zsh role

- name: config | Set ZDOTDIR
  ansible.builtin.lineinfile:
    dest: '{{ ansible_env.HOME }}/.zshenv'
    line: export ZDOTDIR=$HOME/.config/zsh
    # [[ -f $ZDOTDIR/.zshenv ]] && . $ZDOTDIR/.zshenv

- name: config | Ensure config directory exists
  ansible.builtin.file:
    path: '{{ zsh_config_path }}'
    state: directory
    mode: '0755'

- name: config | Copy .zshenv
  ansible.builtin.template:
    src: zshenv.j2
    dest: '{{ zsh_config_path }}/.zshenv'
    mode: '0644'

- name: config | Copy .zshrc
  ansible.builtin.template:
    src: zshrc.j2
    dest: '{{ zsh_config_path }}/.zshrc'
    mode: '0644'

- name: config | Copy .zlogin
  ansible.builtin.template:
    src: zlogin.j2
    dest: '{{ zsh_config_path }}/.zlogin'
    mode: '0644'

- name: config | Set ZSH as default shell
  become: true
  ansible.builtin.user:
    name: '{{ zsh_user }}'
    shell: /bin/zsh
...
