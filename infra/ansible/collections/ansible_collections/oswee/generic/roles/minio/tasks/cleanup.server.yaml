---
# tasks file for minio

- name: Stop Minio server
  become: true
  ansible.builtin.service:
    name: minio
    state: stopped

- name: Remove Minio server binary
  become: true
  ansible.builtin.file:
    path: '{{ minio_server_path }}/minio'
    state: absent

- name: Remove Minio client binary
  become: true
  ansible.builtin.file:
    path: '{{ minio_client_path }}/mc'
    state: absent

- name: Remove Minio user
  become: true
  ansible.builtin.user:
    name: '{{ minio_user }}'
    state: absent
    remove: true

- name: Remove Minio system group
  become: true
  ansible.builtin.group:
    name: '{{ minio_group }}'
    state: absent

- name: Remove Minio environment file
  become: true
  ansible.builtin.file:
    path: /etc/sysconfig/minio
    state: absent

- name: Remove Minio Systemd unit
  become: true
  ansible.builtin.file:
    path: /etc/systemd/system/minio.service
    state: absent
  notify:
    - Reexec systemd
...
