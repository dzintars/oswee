---
# tasks file for minio

# - name: config | Create Minio storage and config directories
#   become: true
#   ansible.builtin.file:
#     path: '{{ item }}'
#     state: directory
#     owner: '{{ minio_user }}'
#     group: '{{ minio_group }}'
#     mode: '0755'
#   loop:
#     - /etc/minio
#     - ${HOME}/.minio/certs

- name: config | Copy Minio envirionment variables
  become: true
  ansible.builtin.template:
    src: minio.env.j2
    dest: /etc/sysconfig/minio
    # owner: '{{ minio_user }}'
    # group: '{{ minio_group }}'
    mode: '0644'
  notify:
    - Reexec systemd
    - Start minio

- name: config | Copy Minio systemd unit file
  become: true
  ansible.builtin.template:
    src: minio.service.j2
    dest: /etc/systemd/system/minio.service
    mode: '0644'
  notify:
    - Change user
    - Change group
    - Reexec systemd
    - Start minio
...
