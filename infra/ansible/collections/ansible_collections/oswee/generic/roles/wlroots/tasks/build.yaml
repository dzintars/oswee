---
# tasks/build.yaml file for oswee.generic.wlroots role

- name: build | Meson wipe
  when: wlroots_meson_wipe | default(false) | bool
  ansible.builtin.command: meson setup --wipe build/
  args:
    chdir: '{{ wlroots_source_path }}'

- name: build | Meson build wlroots
  ansible.builtin.command: meson setup build/
  args:
    chdir: '{{ wlroots_source_path }}'
  environment:
    PKG_CONFIG_PATH: /usr/local/lib/wlroots

- name: build | Ninja build wlroots
  ansible.builtin.command: ninja -C build/
  args:
    chdir: '{{ wlroots_source_path }}'

- name: build | Ninja install wlroots
  become: true
  ansible.builtin.command: ninja -C build/ install
  args:
    chdir: '{{ wlroots_source_path }}'
...
