---
# tasks file for bind

- name: install packages
  become: true
  ansible.builtin.dnf:
    name: '{{ item }}'
    state: present
  loop:
    - bind
    - bind-utils
    # - bind-chroot
  notify:
    - enable named
    - start named

# - name: Open firewall tcp port
#   ansible.posix.firewalld:
#     port: '{{ item }}'
#     permanent: true
#     state: enabled
#   loop:
#     - 53/udp
#     - 53/tcp
#   notify: restart firewalld

- name: add DNS service to firewall
  become: true
  ansible.posix.firewalld:
    service: dns
    permanent: true
    state: enabled
  notify:
    - restart firewalld
