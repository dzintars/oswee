---
- name: Virtualization
  hosts: workstations
  connection: local
  become: false
  # become_user: ansible
  gather_facts: true

  tasks:
    - name: Libvirt
      tags:
        - libvirt
      block:
        - name: Libvirt
          tags:
            - libvirt.up
          ansible.builtin.include_role:
            name: oswee.generic.libvirt

        - name: Libvirt
          tags:
            - libvirt.customize
          ansible.builtin.include_role:
            name: oswee.custom.libvirt
          vars:
            libvirt_dir_iso: /mnt/data/registry/iso
            libvirt_dir_images: /mnt/data/registry/qemu/artifacts
            libvirt_dir_pools: /home/{{ ansible_env.USER }}/kvm/pools

    - name: Vagrant
      tags:
        - vagrant
      ansible.builtin.include_role:
        name: oswee.generic.vagrant
      vars:
        vagrant_version: 2.3.6

    - name: Packer
      tags:
        - packer
      ansible.builtin.include_role:
        name: oswee.generic.packer
      vars:
        packer_version: 1.8.7
...
